<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error - OxichStudio</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .error-container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
            margin: 20px;
        }
        .error-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        .error-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #e53e3e;
        }
        .error-message {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #666;
        }
        .suggestions {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }
        .suggestions h3 {
            margin: 0 0 15px 0;
            font-size: 18px;
            color: #2d3748;
        }
        .suggestions ul {
            margin: 0;
            padding-left: 20px;
        }
        .suggestions li {
            margin-bottom: 8px;
            color: #4a5568;
        }
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        .brand {
            color: #667eea;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="error-icon">ðŸ˜”</div>
        <h1 class="error-title">Something went wrong</h1>
        <p class="error-message">
            <span class="brand">OxichStudio</span> encountered an unexpected error and needs to close. 
            Don't worry - your work is safe and we'll help you get back up and running quickly.
        </p>
        
        <div class="suggestions">
            <h3>ðŸ’¡ Let's fix this together:</h3>
            <ul>
                <li><strong>Restart the application</strong> - Most issues resolve with a fresh start</li>
                <li><strong>Check if another program</strong> is using the same port (usually port 8080)</li>
                <li><strong>Run as administrator</strong> if you're getting permission errors</li>
                <li><strong>Temporarily disable antivirus</strong> if it's blocking OxichStudio</li>
                <li><strong>Free up system memory</strong> by closing other applications</li>
            </ul>
        </div>
        
        <div class="button-group">
            <button class="btn btn-primary" onclick="restartApp()">
                ðŸ”„ Restart OxichStudio
            </button>
            <button class="btn btn-secondary" onclick="openLogs()">
                ðŸ“‹ View Error Details
            </button>
            <button class="btn btn-secondary" onclick="getHelp()">
                ðŸ†˜ Get Help
            </button>
        </div>
    </div>

    <script>
        function restartApp() {
            try {
                if (window.electronAPI && window.electronAPI.restart) {
                    window.electronAPI.restart();
                } else {
                    // Fallback: close window and let user restart manually
                    window.close();
                }
            } catch (error) {
                console.error('Could not restart automatically:', error);
                alert('Please restart OxichStudio manually from your desktop or start menu.');
                window.close();
            }
        }

        function openLogs() {
            try {
                if (window.electronAPI && window.electronAPI.openLogs) {
                    window.electronAPI.openLogs();
                } else {
                    alert('Error logs are saved in the OxichStudio installation folder. Look for files named "error.log" or "app.log".');
                }
            } catch (error) {
                console.error('Could not open logs:', error);
                alert('Please check the OxichStudio installation folder for log files.');
            }
        }

        function getHelp() {
            const helpActions = [
                'Check if port 8080 is being used by another application',
                'Try running OxichStudio as administrator',
                'Temporarily disable antivirus software',
                'Restart your computer to free up system resources',
                'Reinstall OxichStudio if the problem persists'
            ];
            
            const helpMessage = `Here are some steps to try:\n\n${helpActions.map((action, i) => `${i + 1}. ${action}`).join('\n')}`;
            alert(helpMessage);
        }

        // Auto-focus the restart button for better UX
        window.addEventListener('load', () => {
            document.querySelector('.btn-primary').focus();
        });

        // Handle keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                restartApp();
            } else if (e.key === 'Escape') {
                window.close();
            }
        });
    </script>
</body>
</html>
